
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.5">
    
    
      
        <title>EasyBuild - MSKCC HPC Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4a0965b7.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/mskcc.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#easybuild" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MSKCC HPC Documentation" class="md-header__button md-logo" aria-label="MSKCC HPC Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MSKCC HPC Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              EasyBuild
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.mskcc.org/HPC/userdocs.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    HPC/userdocs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MSKCC HPC Documentation" class="md-nav__button md-logo" aria-label="MSKCC HPC Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    MSKCC HPC Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.mskcc.org/HPC/userdocs.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    HPC/userdocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../general/news.html" class="md-nav__link">
        Announcements
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/about-clusters.html" class="md-nav__link">
        About the clusters
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Prerequisites
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Prerequisites" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Prerequisites
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/lilac-overview.html" class="md-nav__link">
        MSKCC HPC system "LILAC"
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/account.html" class="md-nav__link">
        Account Creation and Activation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/ssh-customization.html" class="md-nav__link">
        SSH customization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/shell.html" class="md-nav__link">
        Shell customization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/unix-linux.html" class="md-nav__link">
        Unix/Linux Resources
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          Accessing the Clusters
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Accessing the Clusters" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Accessing the Clusters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/command-line.html" class="md-nav__link">
        Via Command Line
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/web-browser.html" class="md-nav__link">
        Via Web Browser
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/bring-data.html" class="md-nav__link">
        Bringing Data Into the Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/submission.html" class="md-nav__link">
        LSF and Submitting jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/lsf-glossary.html" class="md-nav__link">
        LSF Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/interactive-jobs.html" class="md-nav__link">
        Running Interactive Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/partitions.md" class="md-nav__link">
        Partitions / QoS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/monitoring-jobs.html" class="md-nav__link">
        Monitoring Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/deleting-jobs.html" class="md-nav__link">
        Deleting Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/array-jobs.html" class="md-nav__link">
        Array Jobs with lsf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/dependencies.html" class="md-nav__link">
        Job dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/gpus.html" class="md-nav__link">
        GPUs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/investigating-job-failure.html" class="md-nav__link">
        Investigating a Job Failure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/checkpointing.html" class="md-nav__link">
        Checkpointing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lsf/fair-share.html" class="md-nav__link">
        Fair Share
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="hpc-modules.html" class="md-nav__link">
        HPC software environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="installing-custom-software.html" class="md-nav__link">
        Installing Custom Software
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          EasyBuild
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="EasyBuild.html" class="md-nav__link md-nav__link--active">
        EasyBuild
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    Modules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-specification" class="md-nav__link">
    Package Specification
  </a>
  
    <nav class="md-nav" aria-label="Package Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-easyconfig-files" class="md-nav__link">
    Using EasyConfig files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meta-module-and-toolchains" class="md-nav__link">
    Meta module and Toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting-a-software-stack" class="md-nav__link">
    Selecting a software stack
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adapting-easyconfigs" class="md-nav__link">
    Adapting EasyConfigs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-and-tricks" class="md-nav__link">
    Tips and tricks
  </a>
  
    <nav class="md-nav" aria-label="Tips and tricks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#more-information" class="md-nav__link">
    More information
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lock-directories" class="md-nav__link">
    Lock directories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hidden-modules" class="md-nav__link">
    Hidden Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directly-on-the-compute-node" class="md-nav__link">
    Directly on the compute node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          Supported Applications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Supported Applications" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Supported Applications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="Anaconda.html" class="md-nav__link">
        Anaconda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="CUDA.html" class="md-nav__link">
        CUDA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="JupyterLab.html" class="md-nav__link">
        JupyterLab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="matlab.html" class="md-nav__link">
        Matlab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="bzip2.html" class="md-nav__link">
        Parallel BZIP2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ParaView.html" class="md-nav__link">
        ParaView
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="python.html" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="r.html" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="relion.html" class="md-nav__link">
        Relion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="singularity.html" class="md-nav__link">
        Singularity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Storage" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../file-system/filesystem-overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../file-system/quota.html" class="md-nav__link">
        Quota
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../file-system/file-transfer.html" class="md-nav__link">
        Moving files to and from the HPCs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../file-system/scratch.html" class="md-nav__link">
        Scratch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Workspaces
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Workspaces" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Workspaces
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/workspaces.html" class="md-nav__link">
        Intro to Workspaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hpc-workspaces/workspaces.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hpc-workspaces/management.html" class="md-nav__link">
        Workspace management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hpc-workspaces/environment.html" class="md-nav__link">
        Software environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hpc-workspaces/monitoring.html" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Optimization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Optimization" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Optimization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../optimization/scaling.html" class="md-nav__link">
        Scaling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../general/investment.html" class="md-nav__link">
        Investment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../general/support.html" class="md-nav__link">
        Support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../general/faq.html" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../halloffame.html" class="md-nav__link">
        Hall of Fame
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../code-of-conduct.html" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-Started/glossary.html" class="md-nav__link">
        Glossary
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    Description
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    Modules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-specification" class="md-nav__link">
    Package Specification
  </a>
  
    <nav class="md-nav" aria-label="Package Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-easyconfig-files" class="md-nav__link">
    Using EasyConfig files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meta-module-and-toolchains" class="md-nav__link">
    Meta module and Toolchains
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecting-a-software-stack" class="md-nav__link">
    Selecting a software stack
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adapting-easyconfigs" class="md-nav__link">
    Adapting EasyConfigs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-and-tricks" class="md-nav__link">
    Tips and tricks
  </a>
  
    <nav class="md-nav" aria-label="Tips and tricks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#more-information" class="md-nav__link">
    More information
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lock-directories" class="md-nav__link">
    Lock directories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hidden-modules" class="md-nav__link">
    Hidden Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#directly-on-the-compute-node" class="md-nav__link">
    Directly on the compute node
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.mskcc.org/HPC/userdocs.git/edit/main/docs/software/EasyBuild.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="easybuild">EasyBuild</h1>
<h2 id="description">Description</h2>
<p>EasyBuild can install software packages including the related modules. The location will be controlled using our modules, e.g. the <code>Workspace</code> module, see <a href="installing-custom-software.html">Installing Custom Software</a>.
On top of the usual EasyBuild framework we added some extensions which allows you to build for specific architectures or a generic software stack in your user/group space. 
Therefore, use the <code>eb</code> command to search and try and the <code>eb-install-all</code> or <code>eb-install-generic</code> command to install the package. </p>
<p>The following steps need are necessary:</p>
<ul>
<li>load modules</li>
<li>find the package specification</li>
<li>decide the desired software stack</li>
<li>run EasyBuild installation using <code>eb-install-all</code> or <code>eb-install-generic</code></li>
</ul>
<h2 id="modules">Modules</h2>
<p>Depending if you want to install the package in user or a group space you need to load the related module and the <code>EasyBuild</code> module, e.g.:</p>
<div class="highlight"><pre><span></span><code>module load Workspace  <span class="c1">### if you want to install into your HOME use Workspace_Home</span>
module load EasyBuild
</code></pre></div>
<p>Therewith, our EasyBuild tools and EasyBuild itself are available. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Specify the WorkspaceID if necessary when loading the Workspace module. See module instructions</p>
</div>
<h2 id="package-specification">Package Specification</h2>
<p>EasyBuild has a large repository of available packages in different versions. 
You can use these specifications as is or copy/download and modify the EasyConfigs (see below).</p>
<p>Available packages can be searched using the following command, here for the <strong>gatk</strong> package</p>
<div class="highlight"><pre><span></span><code>eb --search gatk
<span class="o">[</span>...<span class="o">]</span>
eb --search <span class="nv">gatk</span>
<span class="o">==</span> found valid index <span class="k">for</span> /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs, so using it...
 * /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-1.0.5083.eb
...
 * /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-4.0.1.2-Java-1.8.eb
...
 * /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-4.0.12.0-foss-2018b-Python-3.6.6.eb
...
 * /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-4.0.4.0-intel-2018a-Python-3.6.4.eb
 * /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-4.0.5.1-foss-2018a-Python-3.6.4.eb
...
 * /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-4.0.8.1-foss-2018b-Python-2.7.15.eb
...
 * /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-4.1.8.1-GCCcore-9.3.0-Java-1.8.eb
</code></pre></div>
<p>As shown above there are different versions of GATK and for different <em>toolchains</em> available (<code>foss</code>, <code>intel</code>, <code>GCCcore</code>). </p>
<p><strong>Select one</strong>, here <code>GATK-4.1.8.1-GCCcore-9.3.0-Java-1.8.eb</code> is chosen.</p>
<p>Alternatively, the packages can be listed or selected using the package name and target toolchain and version:</p>
<div class="highlight"><pre><span></span><code>eb --software-name<span class="o">=</span>GATK --toolchain-name<span class="o">=</span>GCC --toolchain-version<span class="o">=</span><span class="m">9</span>.3.0
</code></pre></div>
<p>You can list all dependencies using:</p>
<div class="highlight"><pre><span></span><code>eb -Dr /storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs/g/GATK/GATK-4.1.8.1-GCCcore-9.3.0-Java-1.8.eb
...
Dry run: printing build status of easyconfigs and dependencies
<span class="nv">CFGS</span><span class="o">=</span>/storage/software/generic.el7/software/EasyBuild/4.3.3/easybuild/easyconfigs
 * <span class="o">[</span> <span class="o">]</span> <span class="nv">$CFGS</span>/j/Java/Java-1.8.0_281.eb <span class="o">(</span>module: Java/1.8.0_281<span class="o">)</span>
... 
 * <span class="o">[</span>x<span class="o">]</span> <span class="nv">$CFGS</span>/p/Python/Python-2.7.18-GCCcore-9.3.0.eb <span class="o">(</span>module: Python/2.7.18-GCCcore-9.3.0<span class="o">)</span>
 * <span class="o">[</span> <span class="o">]</span> <span class="nv">$CFGS</span>/g/GATK/GATK-4.1.8.1-GCCcore-9.3.0-Java-1.8.eb <span class="o">(</span>module: GATK/4.1.8.1-GCCcore-9.3.0-Java-1.8<span class="o">)</span>
</code></pre></div>
<p>Dependencies marked with <code>x</code> are already installed, the other dependencies will be installed if using the robot option.</p>
<p>Additional options, e.g. for selecting a specific software version can be found using <code>eb --help</code>.</p>
<h3 id="using-easyconfig-files">Using EasyConfig files</h3>
<p>You can use the directly selected EasyConfig or if necessary copy and adapt it.
EasyConfig files are text files specifying the software version, toolchain version, dependencies, compile arguments and more.
If you need more information see <a href="https://easybuild.readthedocs.io/en/latest/">EasyBuild documentation</a>, and if necessary ask our support team for assistance.</p>
<h2 id="meta-module-and-toolchains">Meta module and Toolchains</h2>
<p>Modules specify related dependencies, which gets loaded with that module. These dependencies may have further dependencies.</p>
<p>The chain of dependencies is called toolchain. For example:</p>
<ul>
<li><code>GCC</code> consists of <code>GCCcore</code> and <code>binutils</code></li>
<li><code>gompi</code> consists of <code>GCC</code> and <code>OpenMPI</code></li>
<li><code>foss</code> consists of <code>gompi</code>, <code>OpenBLAS</code>, <code>FFTW</code> and <code>ScaLAPACK</code></li>
</ul>
<p>Within a toolchain the versions of the utilized libraries should be consistent. Thus, building a new package with <code>foss/2020b</code> and <code>PyTorch</code> should rely on a PyTorch version build with the same versions of the underlying libraries. Thus e.g. <code>PyTorch-1.9.0-foss-2020b.eb</code> is also build with <code>foss/2020b</code> as well as the <code>Python/3.8.6</code>. The latter one is build with <code>GCCcore/10.2.0</code> which is part of <code>foss/2020b</code>. </p>
<h2 id="selecting-a-software-stack">Selecting a software stack</h2>
<p>Depending on the package and its target usage one or more software stacks should be selected. Therefore, the installation command starts with one for the following command:</p>
<ul>
<li>all architectural software stacks: <code>eb-install-all</code></li>
<li>a specific architectural software stack (e.g. only targeting Broadwell nodes): <code>eb-install-all --archs='broadwell'</code> OR</li>
<li>generic software stack: <code>eb-install-generic</code>, CPU architecture independent, like <code>git</code></li>
</ul>
<h2 id="installation">Installation</h2>
<p>After selecting the package installation recipe and the target software stack, the installation process can be submitted. 
With the following commands, lsf job files will be created, and submitted to the desired compute nodes. There the packages are build and module files created. The general syntax is: 
<div class="highlight"><pre><span></span><code>eb_install_<span class="o">{</span>all,generic<span class="o">}</span> <span class="o">[</span>options<span class="o">]</span> <span class="o">[</span>easybuild options<span class="o">]</span> &lt;easyconfig&gt;.eb
</code></pre></div>
Additional lsf arguments can be selected using the <code>--lsf-args</code> option, e.g. <code>--lsf-args='--account=xyz --time=00:10:00 --cpus-per-task'</code>. If specific architectures should be selected use e.g. <code>--arch='broadwell ivy'</code>. After this options, EasyBuild arguments can be provided without prefix, e.g. <code>--robot</code>. </p>
<p>Few examples:</p>
<ul>
<li>for a <strong>selected</strong> or <strong>custom</strong> EasyConfig and all missing dependencies in <strong>all architectural</strong> software stacks (here we go with the above selected GATK):
<div class="highlight"><pre><span></span><code>eb-install-all --robot GATK-4.1.8.1-GCCcore-9.3.0-Java-1.8.eb
</code></pre></div></li>
<li>only in the <strong>Broadwell and Login</strong> software stack installing <strong>FFTW</strong> in GCC toolchain (newest version):
<div class="highlight"><pre><span></span><code>eb-install-all --robot --archs<span class="o">=</span><span class="s1">&#39;login broadwell&#39;</span> --software-name<span class="o">=</span>FFTW --toolchain-name<span class="o">=</span>GCC
</code></pre></div></li>
<li>for <strong>git</strong> in the <strong>generic</strong> software stack, with <strong>GCC</strong> toolchain of version 2021a:
<div class="highlight"><pre><span></span><code>eb-install-generic --robot --software-name<span class="o">=</span>git --toolchain-name<span class="o">=</span>GCC --toolchain-version<span class="o">=</span>2021a
</code></pre></div></li>
</ul>
<p>This will need time to get scheduled and processed. 
The job output is presented in the <code>eb_out.*</code> files, one for each architecture. </p>
<p>If the build could not be finished in the default time of 1h, the walltime can be extended using:</p>
<div class="highlight"><pre><span></span><code>eb-install-all --robot --lsf-args<span class="o">=</span><span class="s1">&#39;--time=05:00:00&#39;</span> ...
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please check the end of the out file for the <strong>COMPLETED: Installation ended successfully</strong> statement.</p>
</div>
<p>When finished you (and your collaborators) should be able to use use the software, by just loading the user/workspace related module and the module for the installed package. </p>
<h2 id="adapting-easyconfigs">Adapting EasyConfigs</h2>
<p>in the following description and example we update an existing old EasyConfig for newer versions. In our case we want to update the version of Relion, the toolchain, and dependent libraries it is build with. </p>
<ul>
<li>
<p>setup EasyBuild environment
<div class="highlight"><pre><span></span><code>module load EasyBuild
module load Workspace   ### OR Workspace_Home
</code></pre></div></p>
</li>
<li>
<p>find a suitable easyconfig
<div class="highlight"><pre><span></span><code>$ eb --search Relion 
</code></pre></div>
alternatively you may find easyconfigs online, e.g. <a href="https://github.com/easybuilders/easybuild-easyconfigs">https://github.com/easybuilders/easybuild-easyconfigs</a></p>
</li>
<li>
<p>copy the easyconfig into a working directory (here <code>.</code>)
<div class="highlight"><pre><span></span><code>$ cp $EBROOTEASYBUILD/easybuild/easyconfigs/r/RELION/RELION-3.0.4-foss-2017b.eb .
</code></pre></div></p>
</li>
<li>
<p>rename to the targeted versions (here newer relion, newer toolchain)
<div class="highlight"><pre><span></span><code>$ mv RELION-3.0.4-foss-2017b.eb RELION-3.1.2-foss-2020b.eb
</code></pre></div></p>
</li>
<li>
<p>find the new versions of toolchain and libraries</p>
<ul>
<li>all installed version of a package can be listed using <code>module avail package</code>, e.g. <code>module avail foss</code></li>
<li>available easyconfigs of non-installed packages can be listed using <code>eb --search package</code>. If there is a targeted version available, you can just define that dependency version in the above easyconfig and EasyBuild will find and use it. </li>
</ul>
</li>
<li>
<p>update the versions settings in the file</p>
<ul>
<li>package version, the toolchain version, and all related libraries</li>
<li>Keep in mind that toolchain versions need to match (see <a href="#meta-module-and-toolchains">toolchains</a> above)
<div class="highlight"><pre><span></span><code><span class="n">easyblock</span> <span class="o">=</span> <span class="s1">&#39;CMakeMake&#39;</span>

<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;RELION&#39;</span>
<span class="n">version</span> <span class="o">=</span> <span class="s1">&#39;3.1.2&#39;</span>                            <span class="o">####</span> <span class="n">The</span> <span class="n">Relion</span> <span class="n">version</span> <span class="n">was</span> <span class="s1">&#39;3.0.4&#39;</span> <span class="n">before</span>

<span class="n">homepage</span> <span class="o">=</span> <span class="s1">&#39;http://www2.mrc-lmb.cam.ac.uk/relion/index.php/Main_Page&#39;</span>
<span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;RELION (for REgularised LIkelihood OptimisatioN, pronounce rely-on) is a stand-alone computer</span>
<span class="s2"> program that employs an empirical Bayesian approach to refinement of (multiple) 3D reconstructions or 2D class</span>
<span class="s2"> averages in electron cryo-microscopy (cryo-EM).&quot;&quot;&quot;</span>

<span class="n">toolchain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;foss&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="s1">&#39;2020b&#39;</span><span class="p">}</span>   <span class="o">###</span> <span class="n">the</span> <span class="n">foss</span> <span class="n">toolchain</span> <span class="n">version</span> <span class="n">was</span> <span class="mi">2020</span><span class="n">b</span> <span class="n">before</span>
<span class="n">toolchainopts</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;openmp&#39;</span><span class="p">:</span> <span class="n">True</span><span class="p">}</span>

<span class="n">source_urls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://github.com/3dem/relion/archive&#39;</span><span class="p">]</span>
<span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;%(version)s.tar.gz&#39;</span><span class="p">]</span>
<span class="n">checksums</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2580d66088923a644bc7d3b02efd154b775a3ec3d010426f382bb3be5db9c98b&#39;</span><span class="p">]</span>

<span class="n">builddependencies</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;CMake&#39;</span><span class="p">,</span> <span class="s1">&#39;3.18.4&#39;</span><span class="p">)]</span>    <span class="o">###</span> <span class="n">was</span> <span class="mf">3.9.5</span>

<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;X11&#39;</span><span class="p">,</span> <span class="s1">&#39;20201008&#39;</span><span class="p">),</span>                     <span class="o">###</span> <span class="n">was</span> <span class="mi">20171023</span>
    <span class="p">(</span><span class="s1">&#39;FLTK&#39;</span><span class="p">,</span> <span class="s1">&#39;1.3.5&#39;</span><span class="p">),</span>                       <span class="o">###</span> <span class="n">was</span> <span class="mf">1.3.4</span>
    <span class="p">(</span><span class="s1">&#39;LibTIFF&#39;</span><span class="p">,</span> <span class="s1">&#39;4.1.0&#39;</span><span class="p">),</span>                    <span class="o">###</span> <span class="mf">4.0.9</span>
    <span class="p">(</span><span class="s1">&#39;tbb&#39;</span><span class="p">,</span> <span class="s1">&#39;2020.3&#39;</span><span class="p">),</span>                       <span class="o">###</span> <span class="mi">2018</span><span class="n">_U5</span>
<span class="p">]</span>

<span class="n">configopts</span> <span class="o">=</span> <span class="s2">&quot;-DCMAKE_SHARED_LINKER_FLAGS=&#39;-lpthread&#39;  -DMPI_INCLUDE_PATH=$EBROOTOPENMPI/include &quot;</span>
<span class="n">configopts</span> <span class="o">+=</span> <span class="s2">&quot;-DMPI_C_COMPILER=$EBROOTOPENMPI/bin/mpicc -DMPI_CXX_COMPILER=$EBROOTOPENMPI/bin/mpicxx &quot;</span>
<span class="n">configopts</span> <span class="o">+=</span> <span class="s2">&quot;-DCUDA=OFF -DCudaTexture=OFF &quot;</span>
<span class="n">configopts</span> <span class="o">+=</span> <span class="s2">&quot;-DALTCPU=ON -DFORCE_OWN_TBB=OFF &quot;</span>

<span class="n">sanity_check_paths</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;files&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;bin/relion&#39;</span><span class="p">],</span>
    <span class="s1">&#39;dirs&#39;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>

<span class="n">moduleclass</span> <span class="o">=</span> <span class="s1">&#39;bio&#39;</span>
</code></pre></div></li>
</ul>
</li>
<li>
<p>update the checksum (if package version is changed)
The downloaded source packages are typically checked with SHA256 checksums. When we change to a different source code versio, the checksum changes too. And need to be updated.
<div class="highlight"><pre><span></span><code>$ eb --force --inject-checksums sha256 RELION-3.1.2-foss-2020b.eb
</code></pre></div></p>
</li>
<li>
<p>build the new package as described in <a href="#installation">Installation</a> above, e.g.
<div class="highlight"><pre><span></span><code>$ eb-install-all --robot RELION-3.1.2-foss-2020b.eb
</code></pre></div></p>
</li>
</ul>
<h2 id="tips-and-tricks">Tips and tricks</h2>
<p>Even if EasyBuild tries to simplify the installation process, not always EasyConfigs are Build without issues. There can be several types of issues. Starting form issues in finding exiting packages up to compilation issues. </p>
<h3 id="more-information">More information</h3>
<p>In the EasyBuild output <code>eb_out.*</code> files are issues summarized. Often more details are required. There are more detailed log files created in the temporary directory. 
On the compute nodes they are deleted at the end of the job, but on the login node (ivy) they are kept. The location is mentioned near the end of the output and typically is after <code>Results of the build can be found in the log file</code>.</p>
<h3 id="lock-directories">Lock directories</h3>
<p>EasyBuild has a procedure to prevent building the same package (same version, same software stack) using lock files. If <code>eb-install-*</code> crashes <strong>due to time limit</strong>, the lock files are not removed properly. Therewith the next time you start <code>eb-install-*</code> for that package a message like will be presented at the end of the output:</p>
<p><div class="highlight"><pre><span></span><code>ERROR: Build of /path/to/easyconfig.eb failed <span class="o">(</span>err: <span class="s1">&#39;build failed (first 300 chars): Lock /path/to/.locks/packageVersion.lock already exists, aborting!&#39;</span><span class="o">)</span>
</code></pre></div>
In that moment the lock file should be already removed and the process can finally be started successfully again. </p>
<h3 id="hidden-modules">Hidden Modules</h3>
<p>Sometimes packages are not defined consistently. On UBELIX many packages are provided as hidden modules. This keeps the list nice and tidy. Nevertheless, if a package (or worse one of its dependency) is looking for an existing packages, but it is not mentioned to be hidden, it will not find and need to rebuild again. </p>
<p>Hidden packages can be searched using <code>module --show-hidden avail &lt;PackageXYZ&gt;</code>. If existing as hidden and the target package or dependency does not define it as hidden, EasyBuild can be advised to treat it as hidden using the <code>--hide-deps</code> option. E.g. for binutils, gettext and Mesa, the command would look like:</p>
<div class="highlight"><pre><span></span><code>$ eb-install-all --hide-deps<span class="o">=</span>binutils,gettext,Mesa &lt;PackageXYZ&gt;
</code></pre></div>
<h3 id="directly-on-the-compute-node">Directly on the compute node</h3>
<p>The eb-install-all tool builds the packages directly on a compute node. The node type can be limited/specified by using the option <code>--archs=&lt;type&gt;</code> (see <code>eb-install-all --help</code>). </p>
<p>If this fails, an investigation step may be running directly on the node, without more control of the setup, e.g. build directories. Therefore, EasyBuild can be started directly in a session on the compute node. First, an interactive session is established on the compute node. For example building Relion in the <code>$HOME</code> on an epyc2 node using a local copy of the EasyConfig file:</p>
<div class="highlight"><pre><span></span><code>$ srun --pty --partition epyc2 bash
$ module load Workspace_Home EasyBuild
$ eb --tmpdir<span class="o">=</span><span class="nv">$TMPDIR</span> --robot --hide-deps<span class="o">=</span>binutils,gettext,Mesa RELION-3.1.3-fosscuda-2020b.eb
</code></pre></div>
<p>This may also be used when compiling <strong>on</strong> a specific GPU architecture. </p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2022-06-23
    
  </small>
</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="installing-custom-software.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installing Custom Software" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installing Custom Software
            </div>
          </div>
        </a>
      
      
        
        <a href="Anaconda.html" class="md-footer__link md-footer__link--next" aria-label="Next: Anaconda" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Anaconda
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Memorial Sloan Kettering Cancer Center, High Performance Computing Group
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.mskcc.org/HPC/userdocs.git" target="_blank" rel="noopener" title="github.mskcc.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.85cb4492.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.431f3d41.min.js"></script>
      
    
  </body>
</html>